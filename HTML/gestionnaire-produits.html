<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/18a8b83caf.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../CSS/Style.css" />
    <title>Gestionnaire des produits</title>
</head>

<body class="crudBody">
    <main id="app">

        <header>

            <div class="navBar">
                <div class="nav">

                    <div class="navItem" v-cloak>

                        <a @click="openLoginModal" v-if="!isConnected">
                            <P>Connexion</P>
                        </a>
                        <a href="../products.html">
                            <p>Boutique</p>
                        </a>
                        <span>
                            <p v-if="isConnected" v-cloak>{{ userName }}</p>
                        </span>

                        <span>
                            <a href="../HTML/orderHistory.html">
                                <p v-if="isConnected">Mes commandes</p>
                            </a>
                        </span>

                        <a href="../HTML/cartPage.html" v-if="isConnected">
                            <i class="fa-solid fa-cart-shopping"></i>
                        </a>

                        <div @click="toggleMenu">

                            <i class="fas fa-user" v-if="isConnected"></i>

                        </div>

                        <div class="dropDown" v-if="menuVisible && isConnected">

                            <ul>
                                <a href="../HTML/Profile.html">
                                    <li @click="viewProfile">Detail du Profil</li>
                                  </a>
                                <li class="disconnect" v-if="isConnected" @click="logOut()">Déconnexion</li>
                            </ul>

                        </div>

                    </div>

                </div>
            </div>

            <div class="responsive_menu hiden" id="header">
                <div class="img_resp">
                    <img src="./Images/nav-img-1.jpeg" alt="Service" id="img1" />
                    <img src="./Images/nav-img-2.jpeg" alt="Open" id="img2" />
                    <img src="./Images/nav-img-3.jpeg" alt="Repas" id="img3" />
                </div>
                <div class="inf_resp">
                    <a href="./products.html">
                        <p>Produits</p>
                    </a>
                    <p>Panier</p>
                    <p>Utilisateur</p>
                    <p>Services</p>
                    <a href="../HTML/Contact.html">
                        <p>Contact</p>
                    </a>
                </div>
            </div>
            <div class="Title">
                <div></div>
                <div class="info">
                    <a href="../index.html">
                        <div class="logo">
                            <span class="fa-stack fa-2x" style="flex-shrink: 0">
                                <i class="far fa-circle fa-stack-2x"></i>
                                <i class="fa-solid fa-hippo fa-stack-1x"></i>
                            </span>
                        </div>
                        <div class="info_resto">
                            <span class="name">Web</span>
                            <span class="resto">Wares</span>
                        </div>
                    </a>
                </div>

                <div class="burger" id="menu_burger">
                    <i class="fa-solid fa-bars" id="burger"></i>
                    <i id="croix" class="hiden">&times;</i>
                </div>
            </div>

            <div class="Welcome">
                <h1>Welcome</h1>
                <h3>Try Great to Web Wares</h3>
                <button @click="openLoginModal" v-if="!isConnected">Commencer dès maintenant</button>
            </div>
        </header>

        <form v-if="loginModal" v-cloak class="modal">
            <div class="modal-content">
                <h3>Connexion</h3>
                <span @click="closeLoginModal()">X</span>
                <label for="name">Nom utilisateur</label>
                <input type="text" v-model="userName">
                <label for="password">Mot de passe</label>
                <input type="password" v-model="password">

                <button type="submit" @click.prevent="login()" class="signIn">Me connecter</button>
                <button class="signUp"><a href="../HTML/signUp.html">Pas de compte? je m'inscris</a></button>
            </div>
        </form>

        <h1>Gestionaire de produits</h1>

        <button class="btn btn-success addProd" @click="openAddModal()">Ajouter un produit</button>

        <table>
            <thead>
                <tr>
                    <th>Nom Produit</th>
                    <th>Prix Produit</th>
                    <th>Quantité Produit</th>
                    <th>Catégorie Produit</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                <tr v-for="(prod, index) in product" :key="index" v-cloak>
                    <td class="prodName">{{ prod.name }}</td>
                    <td>{{ prod.price }} €</td>
                    <td>{{ prod.quantity }}</td>
                    <td>{{ prod.category }}</td>
                    <td>
                        <button type="button" class="btn btn-primary actions"
                            @click="openEditModal(index)">Modifier</button>
                        <button type="button" class="btn btn-danger actions" @click="deleteProduct(index)"><i
                                class="fas fa-trash"></i> Supprimer</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="editModal" class="modal" v-if="editModal" @click.stop="closeModal()" v-cloak>
            <div class="modal-content" @click.stop>
                <span class="close" @click.stop="closeEditModal()">X</span>
                <h2>Modifier le produit</h2>

                <form>
                    <label for="editName">Nom Produit: </label><br>
                    <input type="text" id="editName" v-model="tempTable.name"><br>

                    <label for="editPrice">Prix Produit: </label><br>
                    <input type="number" id="editPrice" min="0" v-model="tempTable.price"><br>

                    <label for="editQuantity">Quantité Produit: </label><br>
                    <input type="number" id="editQuantity" min="0" v-model="tempTable.quantity"><br>

                    <label for="editCategory">Catégorie Produit: </label><br>
                    <select id="editCategory" v-model="tempTable.category">
                        <option value="Mobilier">Mobilier</option>
                        <option value="Luminaire">Luminaire</option>
                        <option value="Déco">Décoration</option>
                        <option value="Tapis">Tapis</option>
                    </select><br>

                    <input type="submit" value="Enregistrer" class="btn btn-success confBtn" @click="editProduct()">

                </form>
            </div>
        </div>

        <div id="addModal" class="modal" v-if="addModal" @click.stop="closeModal()" v-cloak>
            <div class="modal-content" @click.stop>
                <h2>Ajouter un produit</h2> <span @click.stop="closeAddModal()">X</span>

                <form>
                    <label for="name">Nom Produit: </label><br>
                    <input type="text" name="name" id="name" v-model="tempTable.name"><br>

                    <label for="price">Prix Produit: </label><br>
                    <input type="number" name="price" id="price" min="0" v-model="tempTable.price"><br>

                    <label for="quantity">Quantité Produit: </label><br>
                    <input type="number" name="quantity" id="quantity" min="0" v-model="tempTable.quantity"><br>

                    <label for="category">Catégorie Produit: </label><br>
                    <select name="category" id="category" v-model="tempTable.category">
                        <option value="Mobilier">Mobilier</option>
                        <option value="Luminaire">Luminaire</option>
                        <option value="Déco">Décoration</option>
                        <option value="Tapis">Tapis</option>
                    </select><br>

                    <input type="submit" value="Ajouter" class="btn btn-success confBtn" @click="addProduct()">
                </form>
            </div>
        </div>

        <footer>
            <div class="info">
                <div>
                    <span class="fa-stack fa-2x" style="flex-shrink: 0">
                        <i class="far fa-circle fa-stack-2x"></i>
                        <i class="fa-solid fa-hippo fa-stack-1x"></i>
                    </span>
                </div>
                <div class="info_resto">
                    <span class="name">Web</span>
                    <span class="resto">Wares</span>
                </div>
            </div>

            <div class="Contact">
                <a href="https://Facebook.com/"><i class="fa-brands fa-square-facebook"></i></a>
                <a href="https://Instagram.com/"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://Google.com/"><i class="fa-brands fa-square-google-plus"></i></a>
                <a href="https://Youtube.com/"><i class="fa-brands fa-youtube"></i></a>
            </div>

            <p>© Copyright. WebWares "Didier MOBILART". All Rights Reserved.</p>
            <h5><a href="../HTML/TermOfUse.html">Mentions Légales</a></h5>
            <h5><a href="../HTML/TermOfUse.html">Politique de Confidantialité</a></h5>
            <h5><a href="../HTML/TermOfUse.html">Conditions d'Utilisation</a></h5>
        </footer>

    </main>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="../JS/script.js"></script>
    <script src="../JS/main.js"></script>
</body>

</html>